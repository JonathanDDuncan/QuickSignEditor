<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charSet="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quick SignEditor</title>
    <meta name="description" content="Quick SignEditor Symbol Size as per SuttonSignWriting" />
    <meta name="author" content="Jonathan Duncan" />
    <link rel="shortcut icon" type="image/png" href="./assets/favicon.ico" />

    <script src="chooserclassification.js"></script>
    <script src="SuttonSignWriting.js"></script>
    <link rel="stylesheet" href="styles/quickSignEditor.css">
    <link rel="stylesheet" href="images/hands12.png.css">
    <link rel="stylesheet" href="images/hands34.png.css">
    <link rel="stylesheet" href="images/hands56.png.css">
    <link rel="stylesheet" href="images/hands78.png.css">
    <link rel="stylesheet" href="images/hands910.png.css">
</head>

<body style="background-color: lightyellow">
    <span id="symbol"> </span>
    <script>
        var getvalidfills = function(fillstr) {
            if (fillstr === "1 - 6")

                return [1, 2, 3, 4, 5, 6]

            else if (fillstr === "1 - 4")

                return [1, 2, 3, 4]

            else if (fillstr === "1, 2")

                return [1, 2]

            else if (fillstr === "1 - 3")

                return [1, 2, 3]

            else if (fillstr === "1 - 5")

                return [1, 2, 3, 4, 5]

            else if (fillstr === "1")

                return [1]

            else if (fillstr === "2")

                return [2]
            else return []
        }
        var getvalidrotations = function(rotationstr) {
            if (rotationstr === "1 - 16")

                return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16];

            else if (rotationstr === "1 - 8")

                return [1, 2, 3, 4, 5, 6, 7, 8];

            else if (rotationstr === "1")

                return [1]

            else if (rotationstr === "1 - 4")

                return [1, 2, 3, 4]

            else if (rotationstr === "1, 2, 4, 5, 6, 8")

                return [1, 2, 4, 5, 6, 8]

            else if (rotationstr === "1, 2, 4, 5, 6, 8, 9, 10, 12, 13, 14, 16")

                return [1, 2, 4, 5, 6, 8, 9, 10, 12, 13, 14, 16]

            else if (rotationstr === "1 - 6")

                return [1, 2, 3, 4, 5, 6]

            else if (rotationstr === "1, 2")

                return [1, 2]

            else if (rotationstr === "1 - 9")

                return [1, 2, 3, 4, 5, 6, 7, 8, 9]
            else
                return []
        }
        var keysizes = []
        var count = 0;
        for (let item of chooserclassification.basechooseritems) {
            let validfills = getvalidfills(item.validfills)
            let validrotations = getvalidrotations(item.validrotations)
            count += 1;

            for (let rotation of validrotations) {
                for (let fill of validfills) {
                    var key1 = item.symbolkey + (rotation - 1).toString(16) + (fill - 1).toString(16)

                    var symbolelement = document.getElementById("symbol");
                    // var pua = ssw.pua(key1);
                    symbolelement.innerHTML = ssw.svg(key1);
                    // "<span class='sym-fill' style='color: white;'>" + pua + "</span><span class='sym-line' style='color: black;'>" + pua + "</span></div>"
                    var text1 = symbolelement.getElementsByTagName('text')[1];
                    var text2 = symbolelement.getElementsByTagName('text')[2];
                    var rect1width = 0;
                    var rect1height = 0;
                    if (text1) {
                        rect1width = text1.clientWidth
                        rect1height = text1.clientHeight
                    }
                    var rect2width = 0;
                    var rect2height = 0;
                    if (text2) {
                        rect2width = text2.clientWidth
                        rect2height = text2.clientHeight
                    }
                    var rect = {};

                    rect.width = Math.max(rect1width, rect2width);
                    rect.height = Math.max(rect1height, rect2height);

                    if (rect.width > 0) {
                        // var size1 = ssw.size(key1);
                        // if (size1.includes("x")) {
                        var keysize = {};
                        keysize.k = key1;

                        // var size2 = size1.split('x');
                        // var width = rect1.right - rect1.left;
                        // var height = rect1.bottom - rect1.top
                        keysize.w = rect.width;
                        keysize.h = rect.height;

                        keysizes.push(keysize)
                            // console.log(key1 + "," + size1);
                            // }
                    }

                }
            }
        }
        console.log(JSON.stringify(keysizes));
        console.log("Count " + count);
    </script>
</body>

</html>